<%- include('common/head'); -%>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="/javascripts/chat_client.js"></script>
</head>

<%- include('common/header'); -%>

<body onload="init()">
    <h1><%= title %></h1>
    <% const plantDate = new Date(plant.date) %>
    <div class="desktop-datetime">
        <p id="dateTime"><%= plantDate.toDateString() %> </p>
    </div>

    <img src="<%= '../' + plant.imagePath %>" alt="user submitted picture of a plant"/>

    <div class="mobile-hide-show-description-btn">
        <!-- TODO static js script to hide and show plantDescriptions div on mobile-->
        <button>Hide Details</button>
    </div>

    <div id="plantDescription">
        <div id="plantCharacteristics">
            <% if (plant.characteristics.hasFlowers) { %>
                <p>This plant has flowers.</p>
            <% } %>
            <% if (plant.characteristics.hasLeaves) { %>
                <p>This plant has leaves.</p>
            <% } %>
            <% if (plant.characteristics.hasFruit) { %>
                <p>This plant has fruit.</p>
            <% } %>
            <% if (plant.characteristics.hasSeeds) { %>
                <p>This plant has seeds.</p>
            <% } %>
            <p><%= "Sun Exposure:" + plant.characteristics.sunExposure %></p>

        </div>
        <p><%= "Spotted in " + " TODO " %></p> <!--// TODO location-->
        <p><%= "Submitted by " + plant.username %></p>
        <div class="mobile-datetime">
            <p id="dateTime"><%= plantDate.toDateString() %> </p>
        </div>
    </div>
    <a href="<%= "/update/" + plant._id %>">
        <button>Update Plant</button>
    </a>


    <h2>Live Chat</h2>
    <div id="joinChat">
        <form onsubmit="return false;">
            <input type="text" id="username" name="username-input" placeholder="Please provide a nickname">
            <button id="connectToChat" >Join chat</button>
        </form>
    </div>
    <div id="chatInterface" style="display: none">
        <div id="chatHistory"></div>
        <div id="sendMessage">
            <form onsubmit="return false;">
                <p>
                    <label for="username">chat: </label>
                    <input type="text" id="chatInput" name="chat-input" placeholder="Your message...">
                    <button id="chatSend" onclick="sendMessage('<%= plant._id %>')">Send</button>
                </p>
            </form>
        </div>
    </div>

</body>

<%- include('common/footer'); -%>